(()=>{"use strict";const e=({duration:e,draw:t,timing:n})=>{let o=performance.now();requestAnimationFrame((function c(a){let r=(a-o)/e;r>1&&(r=1);let i=n(r);t(i),r<1&&requestAnimationFrame(c)}))},t=({formId:e,someElem:t=[]})=>{const n=document.getElementById(e),o=document.createElement("div"),c=e=>{let t=!0;const n=/[а-яёА-ЯЁ\s]/i,o=/[?!,.а-яёА-ЯЁ0-9\s]/i,c=/\+\d{1}\(\d{3}\)\d{3}\-\d{2}\-\d{2}/g;return e.forEach((e=>{"user_name"===e.name&&(n.test(e.value)||(t=!1)),"user_phone"===e.name&&(c.test(e.value)||(t=!1)),"user_message"===e.name&&(o.test(e.value)||(t=!1))})),t};try{if(!n)throw new Error("Верните форму на место!");n.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=n.querySelectorAll("input"),a=new FormData(n),r={};var i;c(e)&&(o.innerHTML='\n\t<div class="loadingio-spinner-spinner-m4xibvllzcq">\n\t\t<div class="ldio-8xzujic9q5p">\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t</div>\n\t</div>\n\t',n.append(o)),a.forEach(((e,t)=>{r[t]=e})),t.forEach((e=>{const t=document.getElementById(e.id);"block"===e.type?r[e.id]=t.textContent:"input"===e.type&&(r[e.id]=t.value)})),c(e)?(i=r,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(i),headers:{"Content-type":"application/json"}}).then((e=>e.json()))).then((t=>{o.textContent="Спасибо! Наш менеджер свяжется с вами!",e.forEach((e=>{e.value=""}))})).catch((e=>{o.textContent="Ошибка"})):alert("Данные не валидны!\nИмя в формате: Иван Иванов\nТелефон в формате: X(XXX)XXX-XX-XX")})()}))}catch(e){console.log(e.message)}};(e=>{const t=document.getElementById("timer-hours"),n=document.getElementById("timer-minutes"),o=document.getElementById("timer-seconds"),c=document.querySelector(".timer-action"),a=()=>{let e=(new Date("22 october 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e/60/60),n=Math.floor(e/60%60),o=Math.floor(e%60);return t<10&&(t="0"+t),n<10&&(n="0"+n),o<10&&(o="0"+o),{timeRemaining:e,hours:t,minutes:n,seconds:o}};(()=>{let e=a();e.timeRemaining>0&&setInterval((()=>{(()=>{let e=a();t.textContent=e.hours,n.textContent=e.minutes,o.textContent=e.seconds})()}),1e3),e.timeRemaining<0&&(c.innerHTML="Акция закончилась")})()})(),(()=>{const e=document.querySelector("main"),t=(document.querySelector(".menu"),document.querySelector("menu")),n=t.querySelectorAll('ul>li>a[href*="#"]'),o=()=>{t.classList.toggle("active-menu")};const c=function(e){e.preventDefault();let t=e.currentTarget.getAttribute("href").slice(1);console.log("scrollTarget",t),((e,t)=>{let n=window.pageYOffset,o=(e=document.getElementById(e)).offsetTop-n,c=null;const a=e=>{c||(c=e);let t=e-c,i=((e,t,n,o)=>(e/=o/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t)(t,n,o,1e3);window.scrollTo(0,i),t<1e3?requestAnimationFrame(a):cancelAnimationFrame(r)};let r=requestAnimationFrame(a)})(t)};e.addEventListener("click",(e=>{t.classList.contains("active-menu")&&(e.target.closest(".active-menu")||o()),e.target.closest(".menu")&&o();const n=e.target.closest("a");n&&n.addEventListener("click",c)})),t.addEventListener("click",(e=>{e.target.classList.contains("close-btn")&&t.classList.toggle("active-menu"),e.target.closest("a")&&n.forEach((e=>{e.addEventListener("click",(e=>{c(e)})),o()}))}))})(),(()=>{const t=document.querySelector(".popup"),n=document.querySelectorAll(".popup-btn"),o=t.querySelector(".popup-content"),c=document.documentElement.clientWidth,a=()=>{c>768?e({duration:1e3,timing:e=>e,draw(e){t.style.display="block",o.style=`transform: translateX(-${50*e}px)`}}):t.style.display="block"};n.forEach((e=>{e.addEventListener("click",a)})),t.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(t.style.display="none")}))})(),((t=100)=>{const n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),c=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),i=document.getElementById("total"),l=function(){this.value=this.value.replace(/\D/g,"")};[c,a,r].forEach((e=>{e.addEventListener("input",l)}));n.addEventListener("input",(n=>{n.target!==o&&n.target!==c&&n.target!==a&&n.target!==r||(()=>{const n=+o.options[o.selectedIndex].value,l=c.value;let s=0,d=1,u=1;var m;a.value>1&&(d+=+a.value/10),r.value&&r.value<5?u=2:r.value&&r.value<10&&(u=1.5),o.value&&c.value?(s=t*n*l*d*u,m=s,e({duration:1e3,timing:e=>e,draw(e){i.textContent=(m*e).toFixed(0)}})):s=0})()}))})(100),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{e.target.closest(".service-header-tab")&&t.forEach(((t,o)=>{t===e.target.closest(".service-header-tab")?(t.classList.add("active"),n[o].classList.remove("d-none")):(t.classList.remove("active"),n[o].classList.add("d-none"))}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-dots");let o,c,a=0;const r=(e,t,n)=>{e[t].classList.remove(n)},i=(e,t,n)=>{e[t].classList.add(n)},l=()=>{r(t,a,"portfolio-item-active"),r(o,a,"dot-active"),a++,a>=t.length&&(a=0),i(t,a,"portfolio-item-active"),i(o,a,"dot-active")},s=(e=1500)=>{c=setInterval(l,e)};e.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(".dot, .portfolio-btn")&&(r(o,a,"dot-active"),r(t,a,"portfolio-item-active"),e.target.matches("#arrow-right")?a++:e.target.matches("#arrow-left")?a--:e.target.classList.contains("dot")&&o.forEach(((t,n)=>{e.target===t&&(a=n)})),a>=t.length&&(a=0),a<0&&(a=t.length-1),i(t,a,"portfolio-item-active"),i(o,a,"dot-active"))})),e.addEventListener("mouseenter",(e=>{e.target.matches(".dot, .portfolio-btn")&&clearInterval(c)}),!0),e.addEventListener("mouseleave",(e=>{e.target.matches(".dot, .portfolio-btn")&&s(2e3)}),!0),t.forEach(((e,t)=>{if(0<=t){let e=document.createElement("li");0===t?(e.classList.add("dot"),e.classList.add("dot-active")):e.classList.add("dot"),n.append(e)}})),o=document.querySelectorAll(".dot"),s(2e3)})(),t({formId:"form1",someElem:[{type:"block",id:"total"}]}),t({formId:"form2"}),t({formId:"form3"})})();